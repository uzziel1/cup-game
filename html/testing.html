<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0 maximum-scale=1.0 user-scalable = 0"
    />
    <title>Cup Game</title>
    <link rel="icon" href="../imgs/cup-game-icon.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Hubballi&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/index.css" />
    <link rel="stylesheet" href="../css/loading.css" />
    <link rel="stylesheet" href="../css/test.css" />
    <link rel="stylesheet" href="../css/game-select.css" />
  </head>
  <body>
    <div class="main">
      <div class="settings-cog" id="settings-cog">
        <img src="../imgs/Settings-cog.png" />
      </div>
      <div class="button-container">
        <div class="title"><img src="../imgs/Gabis-cup-game-title.png" /></div>
        <div class="button">
          <span>Multiplayer</span>
          <img
            src="../imgs/multiplayer-button.png"
            alt="Multiplayer Cups"
            class="button-icon"
          />
        </div>
        <div class="button">
          <span>Singleplayer</span>
          <img
            src="../imgs/cup-colors/red-cup.png"
            alt="Singleplayer Cup"
            class="button-icon"
          />
        </div>
      </div>
    </div>
  </body>
  <script>
    const settingsModal = document.getElementById('settings-modal');
    const settingsCog = document.getElementById('settings-cog');
    const closeSettings = document.getElementById('settings-exit-btn');
    const musicToggle = document.getElementById('music-toggle');
    const bgColorToggle = document.getElementById('bg-color-toggle');
    const cupModeToggle = document.getElementById('cup-mode-toggle');
    const imageGrid = document.getElementById('image-grid');

    //Styles
    const scoreStyle = document.querySelector('.scores').style;
    const tableStyle = document.querySelector('.table-container').style;
    const playStyle = document.querySelector('.play').style;

    let music = new Audio('../music/savage-funk.mp3');
    const buttonGreenColor = '#bcff96';
    const buttonRedColor = '#ff6a6e';

    //purple, green, blue, orange, pink, red, yellow,
    const bgColorOptions = [
      '#eaddff',
      '#e2ffdd',
      '#c9f0ff',
      '#ffceb9',
      '#ffccff',
      '#f78f8f',
      '#f4da90',
      '#ffffff',
    ];
    const cupColorOptions = {
      0: ['red', 'orange', 'yellow', 'green', 'blue', 'purple', 'pink'],
      1: [
        'vibrant-red',
        'vibrant-orange',
        'vibrant-yellow',
        'vibrant-green',
        'vibrant-blue',
        'vibrant-purple',
        'vibrant-pink',
      ],
      2: [
        'sienna',
        'peru',
        'burlywood',
        'dark-olive-green',
        'olive-drab',
        'dark-sea-green',
        'darkwood',
      ],
      3: [
        'black',
        'dark-gray',
        'gray',
        'light-gray',
        'lighter-gray',
        'lightest-gray',
        'white',
      ],
      4: [
        'shayla',
        'alexa',
        'addison',
        'saad',
        'shravani',
        'jennifer',
        'jaime',
      ],
      5: ['gabi1', 'gabi2', 'gabi3', 'gabi4', 'gabi5', 'gabi6', 'gabi7'],
    };
    const cupColorNames = [
      'Pastel',
      'Vibrant',
      'Earth',
      'Mono',
      'Friends',
      'Gabi',
    ];
    let bgColorIndex = JSON.parse(localStorage.getItem('bgColorIndex')) || 0;
    let cupModeIndex = JSON.parse(localStorage.getItem('cupModeIndex')) || 0;
    let musicOn = localStorage.getItem('musicOn') === 'true'; // Convert to boolean

    // Set initial background color based on musicOn
    if (musicOn) {
      musicToggle.style.backgroundColor = buttonGreenColor;
      music.play();
    } else {
      musicToggle.style.backgroundColor = buttonRedColor;
    }

    document.body.style.backgroundColor = bgColorOptions[bgColorIndex];
    bgColorToggle.style.backgroundColor = bgColorOptions[bgColorIndex];

    if (bgColorOptions[bgColorIndex] == '#ffffff') {
      imageGrid.innerHTML = `
      <img src="../imgs/collage1.png" />
      <img src="../imgs/collage2.png" />
      <img src="../imgs/collage3.png" />
      <img src="../imgs/collage4.png" />
      <img src="../imgs/collage5.png" />
      <img src="../imgs/collage3.png" />`;

      //Styles
      scoreStyle.backgroundColor = 'rgba(0, 0, 0, 0.656) ';
      scoreStyle.color = 'white';
      scoreStyle.borderRadius = '1rem';
      tableStyle.backgroundColor = 'rgba(44, 44, 44, 0.656)';
      tableStyle.padding = '3rem';
      tableStyle.borderRadius = '1rem';
      playStyle.backgroundColor = 'rgba(0, 0, 0, 0.656) ';
      playStyle.color = 'white';
      playStyle.borderRadius = '1rem';
    } else {
      imageGrid.innerHTML = ``;
      //Styles
      scoreStyle.backgroundColor = 'transparent';
      scoreStyle.color = 'black';
      scoreStyle.borderRadius = 'none';
      tableStyle.backgroundColor = 'transparent';
      tableStyle.padding = 'none';
      tableStyle.borderRadius = 'none';
      playStyle.backgroundColor = 'transparent';
      playStyle.color = 'black';
      playStyle.borderRadius = 'none';
    }

    let cupColors = cupColorOptions[cupModeIndex] || cupColorOptions.pastel;
    cupModeToggle.innerHTML = cupColorNames[cupModeIndex];
    const cups = document.querySelectorAll('.cup');
    cups.forEach((cup, index) => {
      cup.src = `../imgs/cup-colors/${cupColors[index]}-cup.png`; // Use arr[index] instead of arr[index][0]
      cup.id = cupColors[index];
    });

    //on click functions
    settingsCog.onclick = function () {
      settingsModal.style.display = 'block';
    };

    closeSettings.onclick = function () {
      settingsModal.style.display = 'none';
    };

    //Setting Buttons
    musicToggle.onclick = function () {
      if (musicOn) {
        musicOn = false;
        musicToggle.style.backgroundColor = buttonRedColor;
        music.pause();
        localStorage.setItem('musicOn', 'false');
      } else {
        musicOn = true;
        musicToggle.style.backgroundColor = buttonGreenColor;
        music.play();
        localStorage.setItem('musicOn', 'true');
      }
    };

    bgColorToggle.onclick = function () {
      bgColorIndex = (bgColorIndex + 1) % bgColorOptions.length;
      document.body.style.backgroundColor = bgColorOptions[bgColorIndex];
      bgColorToggle.style.backgroundColor = bgColorOptions[bgColorIndex];

      if (bgColorOptions[bgColorIndex] == '#ffffff') {
        imageGrid.innerHTML = `
      <img src="../imgs/collage1.png" />
      <img src="../imgs/collage2.png" />
      <img src="../imgs/collage3.png" />
      <img src="../imgs/collage4.png" />
      <img src="../imgs/collage5.png" />
      <img src="../imgs/collage3.png" />`;

        //Styles
        scoreStyle.backgroundColor = 'rgba(0, 0, 0, 0.656) ';
        scoreStyle.color = 'white';
        scoreStyle.borderRadius = '1rem';
        tableStyle.backgroundColor = 'rgba(44, 44, 44, 0.656)';
        tableStyle.padding = '3rem';
        tableStyle.borderRadius = '1rem';
        playStyle.backgroundColor = 'rgba(0, 0, 0, 0.656) ';
        playStyle.color = 'white';
        playStyle.borderRadius = '1rem';
      } else {
        imageGrid.innerHTML = ``;
        //Styles
        scoreStyle.backgroundColor = 'transparent';
        scoreStyle.color = 'black';
        scoreStyle.borderRadius = 'none';
        tableStyle.backgroundColor = 'transparent';
        tableStyle.padding = 'none';
        tableStyle.borderRadius = 'none';
        playStyle.backgroundColor = 'transparent';
        playStyle.color = 'black';
        playStyle.borderRadius = 'none';
      }

      localStorage.setItem('bgColorIndex', bgColorIndex);
    };

    cupModeToggle.onclick = function () {
      cupModeIndex = (cupModeIndex + 1) % 6;
      cupColors = cupColorOptions[cupModeIndex];

      cupModeToggle.innerHTML = cupColorNames[cupModeIndex];
      cups.forEach((cup, index) => {
        cup.src = `../imgs/cup-colors/${cupColors[index]}-cup.png`;
        // Use arr[index] instead of arr[index][0]
        cup.id = cupColors[index];
      });

      localStorage.setItem('cupModeIndex', cupModeIndex);
    };

    // const container = document.getElementById('scrollingContainer');
    // let scrollAmount = 0;
    // const scrollSpeed = 1; // Adjust scroll speed here

    // function scrollImages() {
    //   scrollAmount -= scrollSpeed;
    //   if (Math.abs(scrollAmount) >= container.clientWidth / 2) {
    //     scrollAmount = 0; // Reset to beginning to create seamless loop
    //   }
    //   container.style.transform = `translateX(${scrollAmount}px)`;
    //   requestAnimationFrame(scrollImages);
    // }

    // scrollImages();
    // Set initial scroll position
  </script>
</html>
